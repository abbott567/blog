{% extends '../../common/layout.njk' %}

{%- set metaDescription -%}
  {%- include './meta-description.txt' -%}
{%- endset -%}

{% block content %}
<main class="container" id="main" role="main" tabindex="-1">
  <div class="column-two-thirds">
    <h1 class="heading-xlarge margin-bottom-1">Blog {% if page > 1 %}- page {{page}}{% endif %}</h1>
    
    {% for post in posts %}
      <article class="section">
        <h2 class="heading-large">
          {{post.title}}
        </h2>

        {%- set mdcontent -%}{%- include 'posts/' + post.slug + '/excerpt.md' -%}{%- endset -%}
        {{mdcontent|markdown|safe}}

        <a class="read-full-article" href="/blog/{{post.slug}}">
          <span class="visually-hidden">{{post.title}}: </span>
          Read full article
        </a>
        <footer>
          <dl class="article-info">
            <dt class="article-info__text">Published:</dt><dd class="article-info__text">{{post.createdAt|formatDate}}</dd>
            <dt class="article-info__text">Read time:</dt><dd class="article-info__text">{{mdcontent|readTime}}</dd>
          </dl>
        </footer>
      </article>
    {% endfor %}
  </div>
</main>

{% include 'common/components/pagination/template.njk' %}

{% endblock %}